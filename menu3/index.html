<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/grupo_estudos_chesteR/libs/highlight/github.min.css"> <link rel=stylesheet  href="/grupo_estudos_chesteR/css/franklin.css"> <link rel=stylesheet  href="/grupo_estudos_chesteR/css/poole_hyde.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/grupo_estudos_chesteR/assets/favicon.png"> <title>chesteR - reunião 03</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <h1><a href="/grupo_estudos_chesteR/">chesteR</a></h1> <p class=lead >R e Rstudio</p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/grupo_estudos_chesteR/">Home</a> <a class="sidebar-nav-item " href="/grupo_estudos_chesteR/menu1/">Operações</a> <a class="sidebar-nav-item " href="/grupo_estudos_chesteR/menu2/">Variáveis</a> <a class="sidebar-nav-item active" href="/grupo_estudos_chesteR/menu3/">Pacote ggplot2</a> <a class="sidebar-nav-item " href="/grupo_estudos_chesteR/menu4/">Pacote esquisse</a> <a class="sidebar-nav-item " href="/grupo_estudos_chesteR/menu5/">Regressão linear</a> <a class="sidebar-nav-item " href="/grupo_estudos_chesteR/menu6/">Flexdashboard</a> <a class="sidebar-nav-item " href="/grupo_estudos_chesteR/menu7/">Listas, tabelas e apply</a> <a class="sidebar-nav-item " href="/grupo_estudos_chesteR/menu8/">Operações por agrupamento</a> </nav> <p>&copy; Gabriel de Freitas Pereira.</p> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id="chester_-_reunião_03"><a href="#chester_-_reunião_03" class=header-anchor >chesteR - reunião 03</a></h1> <h2 id=pacote_ggplot2 ><a href="#pacote_ggplot2" class=header-anchor >Pacote ggplot2</a></h2> <p>Instalando o pacote e carregando para utilizá-lo:</p> <pre><code class="R hljs">install.packages<span class=hljs-punctuation >(</span><span class=hljs-string >&quot;ggplot2&quot;</span><span class=hljs-punctuation >)</span>
library<span class=hljs-punctuation >(</span>ggplot2<span class=hljs-punctuation >)</span></code></pre> <p>Observação: sempre que quisermos utilizar algum pacote após sua instalação é necessário utilizar a função <code>library&#40;&#41;</code>.</p> <h2 id="composição_dos_gráficos_no_ggplot"><a href="#composição_dos_gráficos_no_ggplot" class=header-anchor >Composição dos gráficos no ggplot:</a></h2> <ul> <li><p>data - dados</p> <li><p>aesthetic mapping - eixos</p> <li><p>geometric object - formato do gráfico</p> <li><p>statistical transformations - transformações &#40;modelos, etc&#41;</p> <li><p>scales - escala</p> <li><p>coordinate system - coordenadas </p> <li><p>position adjustments - posições de elementos gráficos</p> </ul> <h2 id="função_ggplot_e_sua_sintaxe_básica"><a href="#função_ggplot_e_sua_sintaxe_básica" class=header-anchor >Função <code>ggplot&#40;&#41;</code> e sua sintaxe básica </a></h2> <pre><code class="R hljs">ggplot<span class=hljs-punctuation >(</span>data <span class=hljs-operator >=</span> nome_tabela<span class=hljs-punctuation >,</span> mapping <span class=hljs-operator >=</span> aes<span class=hljs-punctuation >(</span>eixos<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_</code></pre> <h4 id="estruturas_de_código_para_os_gráficos_mais_comuns"><a href="#estruturas_de_código_para_os_gráficos_mais_comuns" class=header-anchor >Estruturas de código para os gráficos mais comuns </a></h4> <p>Gráfico de pontos:</p> <pre><code class="R hljs">ggplot<span class=hljs-punctuation >(</span>data <span class=hljs-operator >=</span> <span class=hljs-punctuation >,</span> mapping <span class=hljs-operator >=</span> aes<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_point<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span></code></pre> <p>Gráfico de barra:</p> <pre><code class="R hljs">ggplot<span class=hljs-punctuation >(</span>data<span class=hljs-punctuation >,</span> mapping <span class=hljs-operator >=</span> aes<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_bar<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span></code></pre> <p>Gráfico de linha:</p> <pre><code class="R hljs">ggplot<span class=hljs-punctuation >(</span>data<span class=hljs-punctuation >,</span> mapping <span class=hljs-operator >=</span> aes<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_line<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span></code></pre> <p>Histograma:</p> <pre><code class="R hljs">ggplot<span class=hljs-punctuation >(</span>data<span class=hljs-punctuation >,</span> mapping <span class=hljs-operator >=</span> aes<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_histogram<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span></code></pre> <h2 id=exemplo ><a href="#exemplo" class=header-anchor >Exemplo</a></h2> <p>Exemplo de gráfico usando a base <code>mtcars</code>, a qual é uma tabela com dados de carros que o R já tem carregado assim que você baixa o software. </p> <p>Na base <code>mtcars</code> só temos variáveis numéricas:</p> <pre><code class="R hljs">View<span class=hljs-punctuation >(</span>mtcars<span class=hljs-punctuation >)</span> <span class=hljs-comment >#visualizando os dados da base</span></code></pre>
<p>Gráfico:</p>
<pre><code class="R hljs">ggplot<span class=hljs-punctuation >(</span>data <span class=hljs-operator >=</span> mtcars<span class=hljs-punctuation >,</span>
       mapping <span class=hljs-operator >=</span> aes<span class=hljs-punctuation >(</span>x <span class=hljs-operator >=</span> drat<span class=hljs-punctuation >,</span> y <span class=hljs-operator >=</span> mpg<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_point<span class=hljs-punctuation >(</span><span class=hljs-punctuation >)</span></code></pre>
<p><img src="/grupo_estudos_chesteR/assets/gg_scatter.png" alt="" /></p>
<p>Atalho para maximizar a tela do gráfico dentro do Rstudio: <code>ctrl &#43; shift &#43; 5</code></p>
<h4 id="desenvolvendo_melhor_esse_gráfico"><a href="#desenvolvendo_melhor_esse_gráfico" class=header-anchor >Desenvolvendo melhor esse gráfico</a></h4>
<p>colorindo o gráfico de acordo com a variável gear:</p>
<pre><code class="R hljs">ggplot<span class=hljs-punctuation >(</span>data <span class=hljs-operator >=</span> mtcars<span class=hljs-punctuation >,</span> 
       mapping <span class=hljs-operator >=</span> aes<span class=hljs-punctuation >(</span>x <span class=hljs-operator >=</span> mpg<span class=hljs-punctuation >,</span> y <span class=hljs-operator >=</span> drat<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_point<span class=hljs-punctuation >(</span>aes<span class=hljs-punctuation >(</span>color <span class=hljs-operator >=</span> gear<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span></code></pre>
<p><img src="/grupo_estudos_chesteR/assets/gg_scatter_b.png" alt="" /></p>
<p>Observação: Perceba que a estética dos pontos deve ser definida com a função <code>aes&#40;&#41;</code></p>
<p>Adicionando uma regressão linear e definindo <code>gear</code> como variável categórica, para obtermos os exatos níveis:</p>
<pre><code class="R hljs">grafico_1 <span class=hljs-operator >&lt;-</span> 
  ggplot<span class=hljs-punctuation >(</span>data <span class=hljs-operator >=</span> mtcars<span class=hljs-punctuation >,</span>
         mapping <span class=hljs-operator >=</span> aes<span class=hljs-punctuation >(</span>x <span class=hljs-operator >=</span> mpg<span class=hljs-punctuation >,</span> y <span class=hljs-operator >=</span> drat<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  geom_point<span class=hljs-punctuation >(</span>aes<span class=hljs-punctuation >(</span>color <span class=hljs-operator >=</span> factor<span class=hljs-punctuation >(</span>gear<span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span><span class=hljs-punctuation >)</span> <span class=hljs-operator >+</span>
  stat_smooth<span class=hljs-punctuation >(</span>method <span class=hljs-operator >=</span> <span class=hljs-string >&quot;lm&quot;</span><span class=hljs-punctuation >,</span>
              col <span class=hljs-operator >=</span> <span class=hljs-string >&quot;blue&quot;</span><span class=hljs-punctuation >,</span>
              se <span class=hljs-operator >=</span> <span class=hljs-literal >FALSE</span><span class=hljs-punctuation >,</span>
              size <span class=hljs-operator >=</span> <span class=hljs-number >1</span><span class=hljs-punctuation >)</span></code></pre>
<p>Argumentos especificados dentro de <code>stat_smooth&#40;&#41;</code>: regressão linear &#40;lm&#41;, cor da linha &#40;col&#41;, não mostrar o erro padrão &#40;se &#61; FALSE&#41;, espessura da linha &#40;size &#61; 1&#41;.</p>
<p>Desse modo, nós salvamos o gráfico na variável <code>grafico_1</code>. E se quisermos adicionar outros elementos ao gráfico não é necessário escrever o seu código novamente, basta seguir acrescentando com o <code>&#43;</code> de acordo com a sintaxe do <code>ggplot&#40;&#41;</code>. Exemplo:</p>
<p>Adicionando título:</p>
<pre><code class="R hljs">grafico_1 <span class=hljs-operator >+</span> labs<span class=hljs-punctuation >(</span>title <span class=hljs-operator >=</span> <span class=hljs-string >&quot;Gráfico mpg x drat&quot;</span><span class=hljs-punctuation >)</span></code></pre>
<p><img src="/grupo_estudos_chesteR/assets/gg_lm_scatter.png" alt="" /></p>
<h2 id=vantagens_do_pacote_ggplot2 ><a href="#vantagens_do_pacote_ggplot2" class=header-anchor >Vantagens do pacote <code>ggplot2</code>: </a></h2>
<ul>
<li><p>qualquer tipo de gráfico que tu precisa fazer, alguém já fez e disponibilizou o código na internet.  </p>

<li><p>todos os elementos gráficos são ajustáveis.</p>

<li><p>sintaxe mais simples do que a função <code>plot&#40;&#41;</code> quando se trata de gráficos mais robustos.</p>

</ul>
<div class=page-foot >
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Gabriel de Freitas Pereira. Last modified: April 28, 2022.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div>
    </div>